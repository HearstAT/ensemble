#####
# This file was created via Rake Setup Task
# Generated for environment: <%= @ARGS.env %> by task: <%= @TASK %>
#####

# This is used by Docker Compose to set up prefix names for Docker images,
# containers, volumes and networks. This ensures that everything is named
# consistently regardless of your folder structure.

COMPOSE_PROJECT_NAME=ensemble

# What Rails environment are we in?

<% if @ARGS.env.to_s.include? 'dev' -%>
RAILS_ENV=development
RACK_ENV=development
<% elsif @ARGS.env.to_s.include? 'test' -%>
RAILS_ENV=test
RACK_ENV=test
<% elsif @ARGS.env.to_s.include? 'prod' -%>
RAILS_ENV=production
RACK_ENV=production
<% end -%>

# Rails log level.
# Accepted values: debug, info, warn, error, fatal, or unknown

LOG_LEVEL=info

# You would typically use `rails secret` to generate a secure token. It is
# critical that you keep this value private in production.

SECRET_TOKEN='<%= @ARGS.secret_token %>'
SECRET_KEY_BASE='<%= @ARGS.secret_token %>'

# More details about these Puma variables can be found in config/puma.rb.
# Which address should the Puma app server bind to?

BIND_ON=0.0.0.0:3000

# Puma supports multiple threads but in development mode you'll want to use 1
# thread to ensure that you can properly debug your application.

RAILS_MAX_THREADS=1

# Puma supports multiple workers but you should stick to 1 worker in dev mode.

<% if @ARGS.env.to_s.include? 'prod' -%>
WEB_CONCURRENCY=2
<% else -%>
WEB_CONCURRENCY=1
<% end -%>

# Requests that exceed 5 seconds will be terminated and dumped to a stacktrace.
# Feel free to modify this value to fit the needs of your project, but if you
# have any request that takes more than 5 seconds you probably need to re-think
# what you are doing 99.99% of the time.

REQUEST_TIMEOUT=5

# The database name will automatically get the Rails environment appended to it
# such as: orats_base_development or orats_base_production.

DATABASE=<%= @ARGS.db_name %>
DATABASE_POOL=<%= @ARGS.db_pool %>
DATABASE_USER=<%= @ARGS.db_user %>
DATABASE_PASSWORD=<%= @ARGS.db_pass %>
DATABASE_HOST=<%= @ARGS.db_host %>
DATABASE_PORT=<%= @ARGS.db_port %>

# Not running Docker natively? Replace 'localhost' with your Docker Machine IP
# address, such as: 192.168.99.100:3000

ACTION_MAILER_HOST=<%= @ARGS.email_host %>
ACTION_MAILER_DEFAULT_FROM=<%= @ARGS.email_from %>
ACTION_MAILER_DEFAULT_TO=<%= @ARGS.email_from %>

# Google Analytics universal ID. You should only set this in non-development
# environments. You wouldn't want to track development mode requests in GA.
# GOOGLE_ANALYTICS_UA='xxx'

# Until a CDN or static file server is decided on this will be used.
RAILS_SERVE_STATIC_FILES=true

